<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Enterprise Security Library: Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="cypress_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Enterprise Security Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Overview </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Enterprise Security library provides the capability for Infineon's best-in-class Wi-Fi enabled PSoC&trade; 6 devices to connect to enterprise Wi-Fi networks. This library implements a collection of the most commonly used Extensible Authentication Protocols (EAP) that are commonly used in enterprise networks. This library is an embedded variant of the Wi-Fi supplicant (minimal features) that runs on an RTOS and provides the ability to securely join enterprise security networks (802.1x) using various EAP authentication protocols.</p>
<h1><a class="anchor" id="section_features"></a>
Features and Functionality</h1>
<ul>
<li>Supports the following EAP security protocols:<ul>
<li>EAP-TLS</li>
<li>PEAPv0 with MSCHAPv2</li>
<li>EAP-TTLS with EAP-MSCHAPv2 (Phase 2 tunnel authentication supports only EAP methods)</li>
</ul>
</li>
<li>Supports TLS session (session ID based) resumption</li>
<li>Supports 'PEAP Fast reconnect' (applicable only for PEAP protocol)</li>
<li>Supports roaming across APs in the enterprise network (vanilla roaming)</li>
<li>Supports TLS versions 1.0, 1.1, and 1.2</li>
</ul>
<p ><b>Note</b>: Deviations for <b>Threadx</b> :</p><ul>
<li>Supports only EAP-TLS.</li>
<li>Does not support TLS session resumption.</li>
<li>Supports TLS1.3 in addition to TLS 1.0, 1.1 and 1.2. Only ECDSA key and certificate is supported with TLS1.3.</li>
</ul>
<p >This library provides application developers an easy-to-use, unified interface for quickly enabling enterprise security in their applications. The library provides a single interface to join and leave 802.1x networks using different protocols.</p>
<h1><a class="anchor" id="section_supported_modes"></a>
Supported Enterprise Security Modes</h1>
<ul>
<li>WPA</li>
<li>WPA2</li>
<li>WPA3 Transition</li>
<li>WPA3 Enterprise only</li>
<li>WPA3 192Bit</li>
</ul>
<p ><b>Note</b>: WPA3 Enterprise Modes are supported for Threadx only.</p>
<h1><a class="anchor" id="section_supported_frameworks"></a>
Supported Frameworks</h1>
<ul>
<li>ModusToolbox&trade; environment: In this environment the Enterprise Security library uses the <a href="https://github.com/infineon/abstraction-rtos">abstraction-rtos</a> library that provides the RTOS abstraction API and the <a href="https://github.com/infineon/wifi-connection-manager">wcm</a> library for network functions.</li>
</ul>
<h1><a class="anchor" id="section_supported_platforms"></a>
Supported Platforms</h1>
<h2><a class="anchor" id="section_plat_anycloud"></a>
ModusToolbox™</h2>
<ul>
<li><a href="https://www.cypress.com/documentation/development-kitsboards/psoc-6-wi-fi-bt-prototyping-kit-cy8cproto-062-4343w">PSoC&trade; 6 WiFi-BT Prototyping Kit (CY8CPROTO-062-4343W)</a></li>
<li><a href="https://www.cypress.com/documentation/development-kitsboards/psoc-62s2-wi-fi-bt-pioneer-kit-cy8ckit-062s2-43012">PSoC&trade; 62S2 Wi-Fi BT Pioneer Kit (CY8CKIT-062S2-43012)</a></li>
<li><a href="https://www.cypress.com/documentation/development-kitsboards/psoc-62s2-evaluation-kit-cy8ceval-062s2">PSoC&trade; 62S2 evaluation kit (CY8CEVAL-062S2-MUR-43439M2)</a></li>
<li><a href="https://www.infineon.com/CYW955913EVK-01">CYW955913EVK-01 Wi-Fi Bluetooth&reg; Prototyping Kit (CYW955913EVK-01)</a></li>
</ul>
<h1><a class="anchor" id="section_dependencies"></a>
Dependent Libraries</h1>
<h2><a class="anchor" id="section_dep__anycloud"></a>
ModusToolbox™</h2>
<ul>
<li><a href="https://github.com/infineon/wifi-connection-manager">Wi-Fi Connection Manager</a></li>
<li>nx-secure-wpa3 (For Threadx only)</li>
</ul>
<h1><a class="anchor" id="section_radius_servers"></a>
RADIUS Servers</h1>
<p >This library has been verified with enterprise Wi-Fi networks configured using the following RADIUS server(s):</p><ul>
<li>FreeRadius 3.0.15</li>
</ul>
<h1><a class="anchor" id="section_quick_start"></a>
Quick Start</h1>
<p >This library is supported on ModusToolbox&trade; environments. Enterprise security library supports 2 combinations "FreeRTOS, lwIP, Mbed TLS" and "Threadx, NetxDuo, NetxSecure". The section below provides information on how to build the library in these environments.</p>
<h2><a class="anchor" id="quick_start_freertos_lwip_mbedtls"></a>
FreeRTOS, lwIP, and Mbed TLS</h2>
<ul>
<li>To use enterprise-security library on Wi-Fi kits with FreeRTOS, lwIP, and Mbed TLS combination, the application should pull <a href="https://github.com/Infineon/wifi-core-freertos-lwip-mbedtls">wifi-core-freertos-lwip-mbedtls</a> library which will internally pull all dependent modules. To pull wifi-core-freertos-lwip-mbedtls create the following *.mtb* file in deps folder.<ul>
<li><em>wifi-core-freertos-lwip-mbedtls.mtb:</em> <code><a href="https://github.com/Infineon/wifi-core-freertos-lwip-mbedtls">https://github.com/Infineon/wifi-core-freertos-lwip-mbedtls</a>#latest-v1.X#$$ASSET_REPO$$/wifi-core-freertos-lwip-mbedtls/latest-v1.X</code></li>
</ul>
</li>
</ul>
<p >A set of pre-defined configuration files for FreeRTOS, lwIP, and Mbed TLS combination is bundled in wifi-core-freertos-lwip-mbedtls library for Wi-Fi kits. The developer is expected to review the configuration and make adjustments.</p>
<ul>
<li>Make the following changes to the default mbed TLS configurations in mbedtls_user_config.h:<ul>
<li>Enable the following flags: <div class="fragment"><div class="line">MBEDTLS_DES_C, MBEDTLS_MD4_C, MBEDTLS_MD5_C, MBEDTLS_SHA1_C, MBEDTLS_SSL_PROTO_TLS1, MBEDTLS_SSL_PROTO_TLS1_1, and MBEDTLS_SSL_EXPORT_KEYS</div>
</div><!-- fragment --></li>
<li>Disable the following flags: <div class="fragment"><div class="line">MBEDTLS_POLY1305_C, MBEDTLS_CHACHAPOLY_C, and MBEDTLS_CHACHA20_C</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>Define the following COMPONENTS in the application's Makefile for the Enterprise Security library. <div class="fragment"><div class="line">COMPONENTS=FREERTOS PSOC6HAL MBEDTLS LWIP WCM</div>
</div><!-- fragment --></li>
<li>By default, the macro <code>MBEDTLS_HAVE_TIME_DATE</code> is undefined in mbedtls_user_config.h. If application wishes to perform time and date validation on the certificate, then define the <em>MBEDTLS_HAVE_TIME_DATE</em> flag in mbedtls_user_config.h.</li>
</ul>
<h2><a class="anchor" id="quick_start_threadx_netxduo_netxsecure"></a>
Threadx, NetxDuo, and NetxSecure</h2>
<ul>
<li>To use enterprise-security library with Wi-Fi kits on Threadx, NetxDuo, and NetxSecure combination, the application should pull wifi-core-threadx-netxduo-netxsecure library which will internall pull all dependent modules except nx-secure-wpa3.</li>
<li>To pull wifi-core-threadx-netxduo-netxsecure create the following *.mtb* file in deps folder.<ul>
<li><em>wifi-core-threadx-netxduo-netxsecure.mtb:</em> <code>mtb://wifi-core-threadx-netxduo-netxsecure#latest-v1.X#$$ASSET_REPO$$/wifi-core-threadx-netxduo-netxsecure/latest-v1.X</code></li>
</ul>
</li>
<li>To pull nx-secure-wpa3 create the following *.mtb* file in deps folder.<ul>
<li><em>nx-secure-wpa3.mtb:</em> <code>mtb://nx-secure-wpa3#latest-v1.X#$$ASSET_REPO$$/nx-secure-wpa3/latest-v1.X</code></li>
</ul>
</li>
<li>A set of pre-defined configuration files is bundled in wifi-core-threadx-netxduo-netxsecure library for Wi-Fi kits. The developer is expected to review the configuration and make adjustments.</li>
<li>Define the following COMPONENTS in the application's Makefile for the Enterprise Security library. <div class="fragment"><div class="line">COMPONENTS=THREADX NETXDUO NETXSECURE NETXSECURE_WPA3</div>
<div class="line">DISABLE_COMPONENTS+=NETXSECURE_ROM</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="quick_start_logging"></a>
Enable Logging</h2>
<p >Enterprise Security library disables all the debug log messages by default. To enable log messages, the application must perform the following:</p><ul>
<li>Add <code>ENABLE_ENTERPRISE_SECURITY_LOGS</code> macro to the <em>DEFINES</em> in the application's Makefile. The Makefile entry would look as follows: <div class="fragment"><div class="line">DEFINES+=ENABLE_ENTERPRISE_SECURITY_LOGS</div>
</div><!-- fragment --></li>
<li>Call the <code>cy_log_init()</code> function provided by the <em>cy-log</em> module. cy-log is part of the <em>connectivity-utilities</em> library. See <a href="https://infineon.github.io/connectivity-utilities/api_reference_manual/html/group__logging__utils.html">connectivity-utilities library API documentation</a> for cy-log details.</li>
</ul>
<h1><a class="anchor" id="section_code_snippet"></a>
Code Snippets</h1>
<p >This section provides code snippets for this library on ModusToolbox&trade; environement. The code snippets given under the ModusToolbox&trade; section uses C APIs</p>
<ul>
<li>ModusToolbox&trade; - Snippets for Enterprise security create, join, leave, and delete (C implementation).</li>
</ul>
<h1><a class="anchor" id="section_code_snippet_AnyCloud"></a>
ModusToolbox™</h1>
<h2><a class="anchor" id="snip1"></a>
Code Snippet 1: Enterprise Security Join and Leave (EAP-TLS)</h2>
<p >Creates an Enterprise Security instance and performs join and leave using <a class="el" href="group__enterprise__security__functions.html#ga58f8ea4e23756c5fcd0f8b906995c9ec">cy_enterprise_security_join</a> and <a class="el" href="group__enterprise__security__functions.html#ga596add624e92610ec911888404f90db1">cy_enterprise_security_leave</a> APIs respectively with EAP-TLS. </p><div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;cy_enterprise_security.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;certificate.h&quot;</span></div>
<div class="line"><span class="comment">/******************************************************</span></div>
<div class="line"><span class="comment"> *                      Macros</span></div>
<div class="line"><span class="comment"> ******************************************************/</span></div>
<div class="line"><span class="preprocessor">#define RADIUS_SERVER_IDENTITY            &quot;svtuser&quot;</span></div>
<div class="line"><span class="preprocessor">#define RADIUS_SERVER_PASSWORD            &quot;hnd@123&quot;</span></div>
<div class="line"><span class="preprocessor">#define ENTERPRISE_SECURITY_NW_SSID       &quot;ENT_SEC_NW_2G&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define APP_INFO( x )                     printf x</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/************************************************************</span></div>
<div class="line"><span class="comment"> *                       Global Variables                   *</span></div>
<div class="line"><span class="comment"> ************************************************************/</span></div>
<div class="line"><span class="comment">/* Enterprise Security parameters */</span></div>
<div class="line"><span class="keyword">static</span> <a class="code hl_struct" href="structcy__enterprise__security__parameters__t.html">cy_enterprise_security_parameters_t</a> ent_parameters;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Enterprise Security instance handle */</span></div>
<div class="line"><span class="keyword">static</span> <a class="code hl_typedef" href="group__enterprise__security__typedefs.html#ga3465a932c15df7c5a089ff92562688c8">cy_enterprise_security_t</a> handle;</div>
<div class="line"> </div>
<div class="line">cy_rslt_t ent_sec_join_leave_eap_tls()</div>
<div class="line">{</div>
<div class="line">    cy_rslt_t result = CY_RSLT_SUCCESS;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set the Enterprise Security parameters. */</span></div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#aae48d9bd5609815a9fe0865c58384bd6">ca_cert</a> = (<span class="keywordtype">char</span>*) WIFI_ROOT_CERTIFICATE_STRING;     <span class="comment">/* Defined in certificate.h */</span></div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a6a12f12fade4982427ff5669392cff4f">client_cert</a> = (<span class="keywordtype">char</span>*) WIFI_USER_CERTIFICATE_STRING; <span class="comment">/* Defined in certificate.h */</span></div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#ac8d3759d965c912dbc71dd038fe88c24">client_key</a> = (<span class="keywordtype">char</span>*) WIFI_USER_PRIVATE_KEY_STRING;  <span class="comment">/* Defined in certificate.h */</span></div>
<div class="line">    memcpy(ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a2869dbd2dba99d8c3f76e187c1d33719">ssid</a>, (<span class="keywordtype">char</span> *)ENTERPRISE_SECURITY_NW_SSID, strlen(ENTERPRISE_SECURITY_NW_SSID) + 1);</div>
<div class="line"> </div>
<div class="line">    memcpy(ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#ab3cd260b31f1dd23b4cdfd8427e3993f">outer_eap_identity</a>, (<span class="keywordtype">char</span> *)RADIUS_SERVER_IDENTITY, strlen(RADIUS_SERVER_IDENTITY) + 1);</div>
<div class="line"> </div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a27effe5c70470c2ddd9721295fe9b142">eap_type</a> = <a class="code hl_enumvalue" href="group__enterprise__security__enums.html#ggaf81d8bcebc3ea0e0ccc9d0815d91016baa16797334574c9d8b922223fb1f00192">CY_ENTERPRISE_SECURITY_EAP_TYPE_TLS</a>;</div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#aa415fbc0e707d0f1d303acfeb5fe30d1">auth_type</a> = <a class="code hl_enumvalue" href="group__enterprise__security__enums.html#ggab6bb1148b5dbe35ea6bdfbfd88b969dea75b47292f89f17f4a58f5b15a1313813">CY_ENTERPRISE_SECURITY_AUTH_TYPE_WPA2_MIXED</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Create the Enterprise Security instance and get the handle. */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__enterprise__security__functions.html#gabb4e9a70b803cfbee2a3f7fe4fd6684b">cy_enterprise_security_create</a>(&amp;handle, &amp;ent_parameters);</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Failed to create Enterprise Security instance with error %u\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)result));</div>
<div class="line">        <span class="keywordflow">return</span> CY_RSLT_ERROR;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Join the enterprise security network. */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__enterprise__security__functions.html#ga58f8ea4e23756c5fcd0f8b906995c9ec">cy_enterprise_security_join</a>(handle);</div>
<div class="line">    <span class="keywordflow">if</span>( result == CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Joining an Enterprise Security network is successful.\n&quot;</span>));</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Joining an Enterprise Security network failed with error %u\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)result));</div>
<div class="line">        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Enterprise Security join is successful. Insert other logic here. */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Leave the enterprise security network. */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__enterprise__security__functions.html#ga596add624e92610ec911888404f90db1">cy_enterprise_security_leave</a>(handle);</div>
<div class="line">    <span class="keywordflow">if</span>( result == CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Leaving an Enterprise Security network is successful.\n&quot;</span>));</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Leaving an Enterprise Security network failed with error %u\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)result));</div>
<div class="line">        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">cleanup:</div>
<div class="line">    <span class="comment">/* Dispose the Enterprise Security instance. */</span></div>
<div class="line">    <a class="code hl_function" href="group__enterprise__security__functions.html#gac348c4bf3286e55d46185f36ee7a8448">cy_enterprise_security_delete</a>(&amp;handle);</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Failed to delete Enterprise Security instance with error %u\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)result));</div>
<div class="line">        <span class="keywordflow">return</span> CY_RSLT_ERROR;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="ttc" id="agroup__enterprise__security__enums_html_ggab6bb1148b5dbe35ea6bdfbfd88b969dea75b47292f89f17f4a58f5b15a1313813"><div class="ttname"><a href="group__enterprise__security__enums.html#ggab6bb1148b5dbe35ea6bdfbfd88b969dea75b47292f89f17f4a58f5b15a1313813">CY_ENTERPRISE_SECURITY_AUTH_TYPE_WPA2_MIXED</a></div><div class="ttdeci">@ CY_ENTERPRISE_SECURITY_AUTH_TYPE_WPA2_MIXED</div><div class="ttdoc">WPA2 Enterprise Security with AES and TKIP.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:62</div></div>
<div class="ttc" id="agroup__enterprise__security__enums_html_ggaf81d8bcebc3ea0e0ccc9d0815d91016baa16797334574c9d8b922223fb1f00192"><div class="ttname"><a href="group__enterprise__security__enums.html#ggaf81d8bcebc3ea0e0ccc9d0815d91016baa16797334574c9d8b922223fb1f00192">CY_ENTERPRISE_SECURITY_EAP_TYPE_TLS</a></div><div class="ttdeci">@ CY_ENTERPRISE_SECURITY_EAP_TYPE_TLS</div><div class="ttdoc">EAP-TLS type refer to RFC 2716.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:103</div></div>
<div class="ttc" id="agroup__enterprise__security__functions_html_ga58f8ea4e23756c5fcd0f8b906995c9ec"><div class="ttname"><a href="group__enterprise__security__functions.html#ga58f8ea4e23756c5fcd0f8b906995c9ec">cy_enterprise_security_join</a></div><div class="ttdeci">cy_rslt_t cy_enterprise_security_join(cy_enterprise_security_t handle)</div><div class="ttdoc">Joins an enterprise security network (802.1x Access point)</div></div>
<div class="ttc" id="agroup__enterprise__security__functions_html_ga596add624e92610ec911888404f90db1"><div class="ttname"><a href="group__enterprise__security__functions.html#ga596add624e92610ec911888404f90db1">cy_enterprise_security_leave</a></div><div class="ttdeci">cy_rslt_t cy_enterprise_security_leave(cy_enterprise_security_t handle)</div><div class="ttdoc">Leaves an enterprise security network (802.1x Access point)</div></div>
<div class="ttc" id="agroup__enterprise__security__functions_html_gabb4e9a70b803cfbee2a3f7fe4fd6684b"><div class="ttname"><a href="group__enterprise__security__functions.html#gabb4e9a70b803cfbee2a3f7fe4fd6684b">cy_enterprise_security_create</a></div><div class="ttdeci">cy_rslt_t cy_enterprise_security_create(cy_enterprise_security_t *handle, cy_enterprise_security_parameters_t *ent_parameters)</div><div class="ttdoc">Creates an Enterprise Security instance.</div></div>
<div class="ttc" id="agroup__enterprise__security__functions_html_gac348c4bf3286e55d46185f36ee7a8448"><div class="ttname"><a href="group__enterprise__security__functions.html#gac348c4bf3286e55d46185f36ee7a8448">cy_enterprise_security_delete</a></div><div class="ttdeci">cy_rslt_t cy_enterprise_security_delete(cy_enterprise_security_t *handle)</div><div class="ttdoc">Deletes the given Enterprise Security instance and resources allocated by the cy_enterprise_security_...</div></div>
<div class="ttc" id="agroup__enterprise__security__typedefs_html_ga3465a932c15df7c5a089ff92562688c8"><div class="ttname"><a href="group__enterprise__security__typedefs.html#ga3465a932c15df7c5a089ff92562688c8">cy_enterprise_security_t</a></div><div class="ttdeci">void * cy_enterprise_security_t</div><div class="ttdoc">Enterprise Security instance.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:129</div></div>
<div class="ttc" id="astructcy__enterprise__security__parameters__t_html"><div class="ttname"><a href="structcy__enterprise__security__parameters__t.html">cy_enterprise_security_parameters_t</a></div><div class="ttdoc">Enterprise Security parameters.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:163</div></div>
<div class="ttc" id="astructcy__enterprise__security__parameters__t_html_a27effe5c70470c2ddd9721295fe9b142"><div class="ttname"><a href="structcy__enterprise__security__parameters__t.html#a27effe5c70470c2ddd9721295fe9b142">cy_enterprise_security_parameters_t::eap_type</a></div><div class="ttdeci">cy_enterprise_security_eap_type_t eap_type</div><div class="ttdoc">Authentication mechanism to be used.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:165</div></div>
<div class="ttc" id="astructcy__enterprise__security__parameters__t_html_a2869dbd2dba99d8c3f76e187c1d33719"><div class="ttname"><a href="structcy__enterprise__security__parameters__t.html#a2869dbd2dba99d8c3f76e187c1d33719">cy_enterprise_security_parameters_t::ssid</a></div><div class="ttdeci">char ssid[CY_ENTERPRISE_SECURITY_MAX_SSID_LENGTH]</div><div class="ttdoc">Wi-Fi SSID.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:164</div></div>
<div class="ttc" id="astructcy__enterprise__security__parameters__t_html_a6a12f12fade4982427ff5669392cff4f"><div class="ttname"><a href="structcy__enterprise__security__parameters__t.html#a6a12f12fade4982427ff5669392cff4f">cy_enterprise_security_parameters_t::client_cert</a></div><div class="ttdeci">char * client_cert</div><div class="ttdoc">Client certificate in PEM format.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:167</div></div>
<div class="ttc" id="astructcy__enterprise__security__parameters__t_html_aa415fbc0e707d0f1d303acfeb5fe30d1"><div class="ttname"><a href="structcy__enterprise__security__parameters__t.html#aa415fbc0e707d0f1d303acfeb5fe30d1">cy_enterprise_security_parameters_t::auth_type</a></div><div class="ttdeci">cy_enterprise_security_auth_t auth_type</div><div class="ttdoc">Security auth type used.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:169</div></div>
<div class="ttc" id="astructcy__enterprise__security__parameters__t_html_aae48d9bd5609815a9fe0865c58384bd6"><div class="ttname"><a href="structcy__enterprise__security__parameters__t.html#aae48d9bd5609815a9fe0865c58384bd6">cy_enterprise_security_parameters_t::ca_cert</a></div><div class="ttdeci">char * ca_cert</div><div class="ttdoc">CA certificate in PEM format.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:166</div></div>
<div class="ttc" id="astructcy__enterprise__security__parameters__t_html_ab3cd260b31f1dd23b4cdfd8427e3993f"><div class="ttname"><a href="structcy__enterprise__security__parameters__t.html#ab3cd260b31f1dd23b4cdfd8427e3993f">cy_enterprise_security_parameters_t::outer_eap_identity</a></div><div class="ttdeci">char outer_eap_identity[CY_ENTERPRISE_SECURITY_MAX_IDENTITY_LENGTH]</div><div class="ttdoc">Outer EAP identity.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:170</div></div>
<div class="ttc" id="astructcy__enterprise__security__parameters__t_html_ac8d3759d965c912dbc71dd038fe88c24"><div class="ttname"><a href="structcy__enterprise__security__parameters__t.html#ac8d3759d965c912dbc71dd038fe88c24">cy_enterprise_security_parameters_t::client_key</a></div><div class="ttdeci">char * client_key</div><div class="ttdoc">Client private key in PEM format.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:168</div></div>
</div><!-- fragment --> <h2><a class="anchor" id="snip2"></a>
Code Snippet 2: Enterprise Security Join and Leave (PEAP)</h2>
<p >Creates an Enterprise Security instance and performs join and leave using <a class="el" href="group__enterprise__security__functions.html#ga58f8ea4e23756c5fcd0f8b906995c9ec">cy_enterprise_security_join</a> and <a class="el" href="group__enterprise__security__functions.html#ga596add624e92610ec911888404f90db1">cy_enterprise_security_leave</a> APIs respectively with PEAP. </p><div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;cy_enterprise_security.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;certificate.h&quot;</span></div>
<div class="line"><span class="comment">/******************************************************</span></div>
<div class="line"><span class="comment"> *                      Macros</span></div>
<div class="line"><span class="comment"> ******************************************************/</span></div>
<div class="line"><span class="preprocessor">#define RADIUS_SERVER_IDENTITY            &quot;svtuser&quot;</span></div>
<div class="line"><span class="preprocessor">#define RADIUS_SERVER_PASSWORD            &quot;hnd@123&quot;</span></div>
<div class="line"><span class="preprocessor">#define ENTERPRISE_SECURITY_NW_SSID       &quot;ENT_SEC_NW_2G&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define APP_INFO( x )                     printf x</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/************************************************************</span></div>
<div class="line"><span class="comment"> *                       Global Variables                   *</span></div>
<div class="line"><span class="comment"> ************************************************************/</span></div>
<div class="line"><span class="comment">/* Enterprise Security parameters */</span></div>
<div class="line"><span class="keyword">static</span> <a class="code hl_struct" href="structcy__enterprise__security__parameters__t.html">cy_enterprise_security_parameters_t</a> ent_parameters;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Enterprise Security instance handle */</span></div>
<div class="line"><span class="keyword">static</span> <a class="code hl_typedef" href="group__enterprise__security__typedefs.html#ga3465a932c15df7c5a089ff92562688c8">cy_enterprise_security_t</a> handle;</div>
<div class="line"> </div>
<div class="line">cy_rslt_t ent_sec_join_leave_peap()</div>
<div class="line">{</div>
<div class="line">    cy_rslt_t result = CY_RSLT_SUCCESS;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set the Enterprise Security parameters. */</span></div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#aae48d9bd5609815a9fe0865c58384bd6">ca_cert</a> = (<span class="keywordtype">char</span>*) WIFI_ROOT_CERTIFICATE_STRING;     <span class="comment">/* Defined in certificate.h */</span></div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a6a12f12fade4982427ff5669392cff4f">client_cert</a> = (<span class="keywordtype">char</span>*) WIFI_USER_CERTIFICATE_STRING; <span class="comment">/* Defined in certificate.h */</span></div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#ac8d3759d965c912dbc71dd038fe88c24">client_key</a> = (<span class="keywordtype">char</span>*) WIFI_USER_PRIVATE_KEY_STRING;  <span class="comment">/* Defined in certificate.h */</span></div>
<div class="line">    memcpy(ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a2869dbd2dba99d8c3f76e187c1d33719">ssid</a>, (<span class="keywordtype">char</span> *)ENTERPRISE_SECURITY_NW_SSID, strlen(ENTERPRISE_SECURITY_NW_SSID) + 1);</div>
<div class="line"> </div>
<div class="line">    memcpy(ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#ab3cd260b31f1dd23b4cdfd8427e3993f">outer_eap_identity</a>, (<span class="keywordtype">char</span> *)RADIUS_SERVER_IDENTITY, strlen(RADIUS_SERVER_IDENTITY) + 1);</div>
<div class="line"> </div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a27effe5c70470c2ddd9721295fe9b142">eap_type</a> = <a class="code hl_enumvalue" href="group__enterprise__security__enums.html#ggaf81d8bcebc3ea0e0ccc9d0815d91016baa53629308812ab6eceddf79f04d4d146">CY_ENTERPRISE_SECURITY_EAP_TYPE_PEAP</a>;</div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#aa415fbc0e707d0f1d303acfeb5fe30d1">auth_type</a> = <a class="code hl_enumvalue" href="group__enterprise__security__enums.html#ggab6bb1148b5dbe35ea6bdfbfd88b969dea75b47292f89f17f4a58f5b15a1313813">CY_ENTERPRISE_SECURITY_AUTH_TYPE_WPA2_MIXED</a>;</div>
<div class="line"> </div>
<div class="line">    memcpy(ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a5d0ed49c033c249dbe9fa6f0f0a54b44">phase2</a>.<a class="code hl_variable" href="structcy__enterprise__security__phase2__params__t.html#afc80d33050a1ef087d08deb71e71c3ee">inner_identity</a>, (<span class="keywordtype">char</span> *)RADIUS_SERVER_IDENTITY, strlen(RADIUS_SERVER_IDENTITY) + 1);</div>
<div class="line">    memcpy(ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a5d0ed49c033c249dbe9fa6f0f0a54b44">phase2</a>.<a class="code hl_variable" href="structcy__enterprise__security__phase2__params__t.html#ade625f270e6890f5658ffed844517c08">inner_password</a>, (<span class="keywordtype">char</span> *)RADIUS_SERVER_PASSWORD, strlen(RADIUS_SERVER_PASSWORD) + 1);</div>
<div class="line"> </div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a5d0ed49c033c249dbe9fa6f0f0a54b44">phase2</a>.<a class="code hl_variable" href="structcy__enterprise__security__phase2__params__t.html#abfdfabd71c7653233ecfd33cb7399399">inner_eap_type</a> = <a class="code hl_enumvalue" href="group__enterprise__security__enums.html#ggaf81d8bcebc3ea0e0ccc9d0815d91016ba14093283a0757fd83f49546a0f97ae5a">CY_ENTERPRISE_SECURITY_EAP_TYPE_MSCHAPV2</a>;</div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a5d0ed49c033c249dbe9fa6f0f0a54b44">phase2</a>.<a class="code hl_variable" href="structcy__enterprise__security__phase2__params__t.html#a86b303d7116a45643c23b8ccce7ea83e">tunnel_auth_type</a> = <a class="code hl_enumvalue" href="group__enterprise__security__enums.html#ggaace717cbee387bdc1b99e1be484e9891a93aa6aca9cb8ea1219c9dfeeadae4ddb">CY_ENTERPRISE_SECURITY_TUNNEL_TYPE_MSCHAPV2</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Create the Enterprise Security instance and get the handle. */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__enterprise__security__functions.html#gabb4e9a70b803cfbee2a3f7fe4fd6684b">cy_enterprise_security_create</a>(&amp;handle, &amp;ent_parameters);</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Failed to create Enterprise Security instance with error %u\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)result));</div>
<div class="line">        <span class="keywordflow">return</span> CY_RSLT_ERROR;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Join the enterprise security network. */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__enterprise__security__functions.html#ga58f8ea4e23756c5fcd0f8b906995c9ec">cy_enterprise_security_join</a>(handle);</div>
<div class="line">    <span class="keywordflow">if</span>( result == CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Joining an Enterprise Security network is successful.\n&quot;</span>));</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Joining an Enterprise Security network failed with error %u\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)result));</div>
<div class="line">        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Enterprise Security join is successful. Insert other logic here. */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Leave the enterprise security network. */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__enterprise__security__functions.html#ga596add624e92610ec911888404f90db1">cy_enterprise_security_leave</a>(handle);</div>
<div class="line">    <span class="keywordflow">if</span>( result == CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Leaving an Enterprise Security network is successful.\n&quot;</span>));</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Leaving an Enterprise Security network failed with error %u\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)result));</div>
<div class="line">        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">cleanup:</div>
<div class="line">    <span class="comment">/* Dispose the Enterprise Security instance. */</span></div>
<div class="line">    <a class="code hl_function" href="group__enterprise__security__functions.html#gac348c4bf3286e55d46185f36ee7a8448">cy_enterprise_security_delete</a>(&amp;handle);</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Failed to delete Enterprise Security instance with error %u\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)result));</div>
<div class="line">        <span class="keywordflow">return</span> CY_RSLT_ERROR;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="ttc" id="agroup__enterprise__security__enums_html_ggaace717cbee387bdc1b99e1be484e9891a93aa6aca9cb8ea1219c9dfeeadae4ddb"><div class="ttname"><a href="group__enterprise__security__enums.html#ggaace717cbee387bdc1b99e1be484e9891a93aa6aca9cb8ea1219c9dfeeadae4ddb">CY_ENTERPRISE_SECURITY_TUNNEL_TYPE_MSCHAPV2</a></div><div class="ttdeci">@ CY_ENTERPRISE_SECURITY_TUNNEL_TYPE_MSCHAPV2</div><div class="ttdoc">MSCHAPv2 as tunnel EAP type.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:85</div></div>
<div class="ttc" id="agroup__enterprise__security__enums_html_ggaf81d8bcebc3ea0e0ccc9d0815d91016ba14093283a0757fd83f49546a0f97ae5a"><div class="ttname"><a href="group__enterprise__security__enums.html#ggaf81d8bcebc3ea0e0ccc9d0815d91016ba14093283a0757fd83f49546a0f97ae5a">CY_ENTERPRISE_SECURITY_EAP_TYPE_MSCHAPV2</a></div><div class="ttdeci">@ CY_ENTERPRISE_SECURITY_EAP_TYPE_MSCHAPV2</div><div class="ttdoc">MSCHAPv2 type refer to draft-kamath-pppext-eap-mschapv2-00.txt.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:109</div></div>
<div class="ttc" id="agroup__enterprise__security__enums_html_ggaf81d8bcebc3ea0e0ccc9d0815d91016baa53629308812ab6eceddf79f04d4d146"><div class="ttname"><a href="group__enterprise__security__enums.html#ggaf81d8bcebc3ea0e0ccc9d0815d91016baa53629308812ab6eceddf79f04d4d146">CY_ENTERPRISE_SECURITY_EAP_TYPE_PEAP</a></div><div class="ttdeci">@ CY_ENTERPRISE_SECURITY_EAP_TYPE_PEAP</div><div class="ttdoc">PEAP type refer to draft-josefsson-pppext-eap-tls-eap-06.txt.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:108</div></div>
<div class="ttc" id="astructcy__enterprise__security__parameters__t_html_a5d0ed49c033c249dbe9fa6f0f0a54b44"><div class="ttname"><a href="structcy__enterprise__security__parameters__t.html#a5d0ed49c033c249dbe9fa6f0f0a54b44">cy_enterprise_security_parameters_t::phase2</a></div><div class="ttdeci">cy_enterprise_security_phase2_params_t phase2</div><div class="ttdoc">Phase2 authentication parameters.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:172</div></div>
<div class="ttc" id="astructcy__enterprise__security__phase2__params__t_html_a86b303d7116a45643c23b8ccce7ea83e"><div class="ttname"><a href="structcy__enterprise__security__phase2__params__t.html#a86b303d7116a45643c23b8ccce7ea83e">cy_enterprise_security_phase2_params_t::tunnel_auth_type</a></div><div class="ttdeci">cy_enterprise_security_tunnel_t tunnel_auth_type</div><div class="ttdoc">Tunnel authentication type.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:150</div></div>
<div class="ttc" id="astructcy__enterprise__security__phase2__params__t_html_abfdfabd71c7653233ecfd33cb7399399"><div class="ttname"><a href="structcy__enterprise__security__phase2__params__t.html#abfdfabd71c7653233ecfd33cb7399399">cy_enterprise_security_phase2_params_t::inner_eap_type</a></div><div class="ttdeci">cy_enterprise_security_eap_type_t inner_eap_type</div><div class="ttdoc">Inner EAP type.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:151</div></div>
<div class="ttc" id="astructcy__enterprise__security__phase2__params__t_html_ade625f270e6890f5658ffed844517c08"><div class="ttname"><a href="structcy__enterprise__security__phase2__params__t.html#ade625f270e6890f5658ffed844517c08">cy_enterprise_security_phase2_params_t::inner_password</a></div><div class="ttdeci">char inner_password[CY_ENTERPRISE_SECURITY_MAX_PASSWORD_LENGTH]</div><div class="ttdoc">Inner user password.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:153</div></div>
<div class="ttc" id="astructcy__enterprise__security__phase2__params__t_html_afc80d33050a1ef087d08deb71e71c3ee"><div class="ttname"><a href="structcy__enterprise__security__phase2__params__t.html#afc80d33050a1ef087d08deb71e71c3ee">cy_enterprise_security_phase2_params_t::inner_identity</a></div><div class="ttdeci">char inner_identity[CY_ENTERPRISE_SECURITY_MAX_IDENTITY_LENGTH]</div><div class="ttdoc">Inner user identity.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:152</div></div>
</div><!-- fragment --> <h2><a class="anchor" id="snip3"></a>
Code Snippet 3: Enterprise Security Join and Leave (EAP-TTLS)</h2>
<p >Creates an Enterprise Security instance and performs join and leave using <a class="el" href="group__enterprise__security__functions.html#ga58f8ea4e23756c5fcd0f8b906995c9ec">cy_enterprise_security_join</a> and <a class="el" href="group__enterprise__security__functions.html#ga596add624e92610ec911888404f90db1">cy_enterprise_security_leave</a> APIs respectively with EAP-TTLS. </p><div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;cy_enterprise_security.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;certificate.h&quot;</span></div>
<div class="line"><span class="comment">/******************************************************</span></div>
<div class="line"><span class="comment"> *                      Macros</span></div>
<div class="line"><span class="comment"> ******************************************************/</span></div>
<div class="line"><span class="preprocessor">#define RADIUS_SERVER_IDENTITY            &quot;svtuser&quot;</span></div>
<div class="line"><span class="preprocessor">#define RADIUS_SERVER_PASSWORD            &quot;hnd@123&quot;</span></div>
<div class="line"><span class="preprocessor">#define ENTERPRISE_SECURITY_NW_SSID       &quot;ENT_SEC_NW_2G&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define APP_INFO( x )                     printf x</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/************************************************************</span></div>
<div class="line"><span class="comment"> *                       Global Variables                   *</span></div>
<div class="line"><span class="comment"> ************************************************************/</span></div>
<div class="line"><span class="comment">/* Enterprise Security parameters */</span></div>
<div class="line"><span class="keyword">static</span> <a class="code hl_struct" href="structcy__enterprise__security__parameters__t.html">cy_enterprise_security_parameters_t</a> ent_parameters;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Enterprise Security instance handle */</span></div>
<div class="line"><span class="keyword">static</span> <a class="code hl_typedef" href="group__enterprise__security__typedefs.html#ga3465a932c15df7c5a089ff92562688c8">cy_enterprise_security_t</a> handle;</div>
<div class="line"> </div>
<div class="line">cy_rslt_t ent_sec_join_leave_eap_ttls()</div>
<div class="line">{</div>
<div class="line">    cy_rslt_t result = CY_RSLT_SUCCESS;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set the Enterprise Security parameters. */</span></div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#aae48d9bd5609815a9fe0865c58384bd6">ca_cert</a> = (<span class="keywordtype">char</span>*) WIFI_ROOT_CERTIFICATE_STRING;     <span class="comment">/* Defined in certificate.h */</span></div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a6a12f12fade4982427ff5669392cff4f">client_cert</a> = (<span class="keywordtype">char</span>*) WIFI_USER_CERTIFICATE_STRING; <span class="comment">/* Defined in certificate.h */</span></div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#ac8d3759d965c912dbc71dd038fe88c24">client_key</a> = (<span class="keywordtype">char</span>*) WIFI_USER_PRIVATE_KEY_STRING;  <span class="comment">/* Defined in certificate.h */</span></div>
<div class="line">    memcpy(ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a2869dbd2dba99d8c3f76e187c1d33719">ssid</a>, (<span class="keywordtype">char</span> *)ENTERPRISE_SECURITY_NW_SSID, strlen(ENTERPRISE_SECURITY_NW_SSID) + 1);</div>
<div class="line"> </div>
<div class="line">    memcpy(ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#ab3cd260b31f1dd23b4cdfd8427e3993f">outer_eap_identity</a>, (<span class="keywordtype">char</span> *)RADIUS_SERVER_IDENTITY, strlen(RADIUS_SERVER_IDENTITY) + 1);</div>
<div class="line"> </div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a27effe5c70470c2ddd9721295fe9b142">eap_type</a> = <a class="code hl_enumvalue" href="group__enterprise__security__enums.html#ggaf81d8bcebc3ea0e0ccc9d0815d91016bae66677e97a779afc32fc416796859314">CY_ENTERPRISE_SECURITY_EAP_TYPE_TTLS</a>;</div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#aa415fbc0e707d0f1d303acfeb5fe30d1">auth_type</a> = <a class="code hl_enumvalue" href="group__enterprise__security__enums.html#ggab6bb1148b5dbe35ea6bdfbfd88b969dea75b47292f89f17f4a58f5b15a1313813">CY_ENTERPRISE_SECURITY_AUTH_TYPE_WPA2_MIXED</a>;</div>
<div class="line"> </div>
<div class="line">    memcpy(ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a5d0ed49c033c249dbe9fa6f0f0a54b44">phase2</a>.<a class="code hl_variable" href="structcy__enterprise__security__phase2__params__t.html#afc80d33050a1ef087d08deb71e71c3ee">inner_identity</a>, (<span class="keywordtype">char</span> *)RADIUS_SERVER_IDENTITY, strlen(RADIUS_SERVER_IDENTITY) + 1);</div>
<div class="line">    memcpy(ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a5d0ed49c033c249dbe9fa6f0f0a54b44">phase2</a>.<a class="code hl_variable" href="structcy__enterprise__security__phase2__params__t.html#ade625f270e6890f5658ffed844517c08">inner_password</a>, (<span class="keywordtype">char</span> *)RADIUS_SERVER_PASSWORD, strlen(RADIUS_SERVER_PASSWORD) + 1);</div>
<div class="line"> </div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a5d0ed49c033c249dbe9fa6f0f0a54b44">phase2</a>.<a class="code hl_variable" href="structcy__enterprise__security__phase2__params__t.html#abfdfabd71c7653233ecfd33cb7399399">inner_eap_type</a> = <a class="code hl_enumvalue" href="group__enterprise__security__enums.html#ggaf81d8bcebc3ea0e0ccc9d0815d91016ba14093283a0757fd83f49546a0f97ae5a">CY_ENTERPRISE_SECURITY_EAP_TYPE_MSCHAPV2</a>;</div>
<div class="line">    ent_parameters.<a class="code hl_variable" href="structcy__enterprise__security__parameters__t.html#a5d0ed49c033c249dbe9fa6f0f0a54b44">phase2</a>.<a class="code hl_variable" href="structcy__enterprise__security__phase2__params__t.html#a86b303d7116a45643c23b8ccce7ea83e">tunnel_auth_type</a> = <a class="code hl_enumvalue" href="group__enterprise__security__enums.html#ggaace717cbee387bdc1b99e1be484e9891af38c3165e0d2009f04bb033dc85b867a">CY_ENTERPRISE_SECURITY_TUNNEL_TYPE_EAP</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Create the Enterprise Security instance and get the handle. */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__enterprise__security__functions.html#gabb4e9a70b803cfbee2a3f7fe4fd6684b">cy_enterprise_security_create</a>(&amp;handle, &amp;ent_parameters);</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Failed to create Enterprise Security instance with error %u\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)result));</div>
<div class="line">        <span class="keywordflow">return</span> CY_RSLT_ERROR;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Join the enterprise security network. */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__enterprise__security__functions.html#ga58f8ea4e23756c5fcd0f8b906995c9ec">cy_enterprise_security_join</a>(handle);</div>
<div class="line">    <span class="keywordflow">if</span>( result == CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Joining an Enterprise Security network is successful.\n&quot;</span>));</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Joining an Enterprise Security network failed with error %u\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)result));</div>
<div class="line">        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Enterprise Security join is successful. Insert other logic here. */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Leave the enterprise security network. */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__enterprise__security__functions.html#ga596add624e92610ec911888404f90db1">cy_enterprise_security_leave</a>(handle);</div>
<div class="line">    <span class="keywordflow">if</span>( result == CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Leaving an Enterprise Security network is successful.\n&quot;</span>));</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Leaving an Enterprise Security network failed with error %u\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)result));</div>
<div class="line">        <span class="keywordflow">goto</span> cleanup;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">cleanup:</div>
<div class="line">    <span class="comment">/* Dispose the Enterprise Security instance. */</span></div>
<div class="line">    <a class="code hl_function" href="group__enterprise__security__functions.html#gac348c4bf3286e55d46185f36ee7a8448">cy_enterprise_security_delete</a>(&amp;handle);</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        APP_INFO((<span class="stringliteral">&quot;Failed to delete Enterprise Security instance with error %u\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)result));</div>
<div class="line">        <span class="keywordflow">return</span> CY_RSLT_ERROR;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="ttc" id="agroup__enterprise__security__enums_html_ggaace717cbee387bdc1b99e1be484e9891af38c3165e0d2009f04bb033dc85b867a"><div class="ttname"><a href="group__enterprise__security__enums.html#ggaace717cbee387bdc1b99e1be484e9891af38c3165e0d2009f04bb033dc85b867a">CY_ENTERPRISE_SECURITY_TUNNEL_TYPE_EAP</a></div><div class="ttdeci">@ CY_ENTERPRISE_SECURITY_TUNNEL_TYPE_EAP</div><div class="ttdoc">EAP as tunnel EAP type.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:82</div></div>
<div class="ttc" id="agroup__enterprise__security__enums_html_ggaf81d8bcebc3ea0e0ccc9d0815d91016bae66677e97a779afc32fc416796859314"><div class="ttname"><a href="group__enterprise__security__enums.html#ggaf81d8bcebc3ea0e0ccc9d0815d91016bae66677e97a779afc32fc416796859314">CY_ENTERPRISE_SECURITY_EAP_TYPE_TTLS</a></div><div class="ttdeci">@ CY_ENTERPRISE_SECURITY_EAP_TYPE_TTLS</div><div class="ttdoc">EAP-TTLS type refer to draft-ietf-pppext-eap-ttls-02.txt.</div><div class="ttdef"><b>Definition:</b> cy_enterprise_security.h:106</div></div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>Enterprise Security Library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
</body>
</html>
